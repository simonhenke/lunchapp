$location-bg: #fff;
$description-lines-cut:2;
$description-font-size:18px;
$description-line-height:1.3;
$star-highlight-color: #f4c600;
$star-color: $light-grey;
$rating-width: 160px;
$rating-width-small: 130px;

@keyframes pop{
  50%{transform:scale(1.05);}
  100% {transform: scale(1);}
}

.location-list{
	list-style-type:none;
	margin:0;
	padding:0;
	margin-top:$gap*3;

	li:not(:last-of-type){
		margin-bottom:$gap*2;
	}
	li{
		background: $location-bg;
		clear:both;
		height:20vw;
		min-height:175px;
		max-height:275px;
		position:relative;

		&.location--focused{
			animation: pop .3s;
			//animation-delay:.2s;
			box-shadow: 0px 0px 50px 0px rgba(black,.4);
			&:before,&:after{
				position:absolute;
				content:"";
				background:$primary-color;
				top:0;bottom:0;
				width:10px;
			}
			&:before{
				left:-10px;
			}
			&:after{
				right:-10px;
			}
		}

		&:first-of-type .location__user-count{
			color:$count-color-first;
		}

		&:nth-of-type(2) .location__user-count{
			color:$count-color-second;
		}
	}
}

.location{
	//padding-right:16%;
	height:100%;

	&__image{
		position:absolute;
		left:0;
		width:35%;
		overflow:hidden;
		height:100%;

		img{
	    	height:100%;
		}
	}

	&__body{
		padding-left:35%;
		padding-right:16%;
		//float:left;
		display:inline-block;
		word-wrap: break-word;
		width:100%;

	}

	&__body-wrapper{
		padding: $gap*2;
		width:100%;

		@media(max-width:$screen-md){
			padding: $gap;
		}
	}

	&__name{
		margin:0;
		text-transform:uppercase;
		font-weight:600;
		font-size:1.7em;
		line-height:1.2;
		margin-bottom:$gap;

		@media(max-width:$screen-md){
			font-size:1.3em;
		}
	}

	&__description{
		margin:0;
		max-width:100%;
		font-size:$description-font-size;
		line-height:$description-line-height;
		display:block;
		display: -webkit-box;
		color:$primary-color;

		@media(max-width:$screen-lg){
			// Truncate description to fix number of lines
  			overflow: hidden;
  			text-overflow: ellipsis;
  			-webkit-line-clamp: 2;
 			-webkit-box-orient: vertical;
  			height:$description-lines-cut* $description-line-height * $description-font-size;
		}
	}

	&__user-count{
		position:absolute;
		left:50%;
		top:50%;
		font-size:5em;
		font-family: 'PT Serif', serif;
		color:$count-color-third;
		background:white;
		width:115px;
		height:115px;
		line-height:115px;
		display:inline-block;
		text-align:center;
		transform:translateY(-50%) translateX(-50%);
		border-radius:50%;
		box-shadow: 0px 3px 4px 0px rgba(#000,0.1);
		cursor:pointer;
		transition:transform .15s;

		&:hover{
			 transform: translateY(-50%) translateX(-50%) scale(1.1);
		}
		
		@media(min-width:$screen-sm)and(max-width:$screen-md){
			width:80px;
			height:80px;
			line-height:80px;
			font-size:3.5em;
		}

		@media(min-width:$screen-xs)and(max-width:$screen-sm){
			width:65px;
			height:65px;
			line-height:65px;
			font-size:2.75em;
		}

		@media(max-width:$screen-xs){
			width:70px;
			height:70px;
			line-height:70px;
			font-size:3em;
		}

	}

	&__counter-box{
		position:relative;
		position:absolute;
		right:0;
		top:0;
		width:16%;
		height:100%;
		background:lightgrey;
		background-image:url("../images/texture.png")
	}

	&__rating{
		position:absolute;
		left:35%;
		bottom:$gap*2;
		margin-left:$gap*2;

		@media(max-width:$screen-md){
			margin-left:$gap;
			bottom:$gap;
		}

		.icon-star{
			display:inline;
			font-size:2em;
			color:$star-color;
			line-height:1;
			cursor:pointer;
			@media(max-width:$screen-md){
				font-size:1.6em;
			}

			&.icon-star-active{
				color:$star-highlight-color !important;
			}
			&.icon-star-inactive{
				color:$star-color !important;
			}
		}

		&.rating-1 .icon-star{
			color:$star-highlight-color;
		}
		&.rating-2 .icon-star:nth-of-type(-n+2){
			color:$star-highlight-color;
		}
		&.rating-3 .icon-star:nth-of-type(-n+3){
			color:$star-highlight-color;
		}
		&.rating-4 .icon-star:nth-of-type(-n+4){
			color:$star-highlight-color;
		}
		&.rating-5 .icon-star:nth-of-type(-n+5){
			color:$star-highlight-color;
		}
	}

	&__cta{
		position:absolute;
		bottom:$gap*2;
		margin-top:$gap;
		border: 2px solid $primary-color;
		padding:$gap/2 $gap;
		color:$primary-color;
		text-decoration: none;
		left:35%;
		margin-left:$gap*2 + $rating-width + $gap*2;
		cursor:pointer;
		transition:background .15s, transform .15s;
		font-size:1.2em;
	
		&:hover{
			 transform: scale(1.1);
		}

		@media(max-width:$screen-md){
			margin-left:$gap + $rating-width-small +$gap;
			bottom:$gap;
		}
	}
}

// Design change for xs screen (image on top)
@media(max-width:$screen-xs){
	.location{
		margin-top:200px;
		&__image{
			width:100%;
			background:grey;
			bottom:100%;

			img{
				max-width:100%;
				height:initial;
			}
		}
		&__body{
			padding-left:0;
			padding-right:25%;
		}

		&__rating{
			left:$gap;
			margin:0;
		}

		&__cta{
			left:$gap + $rating-width-small + $gap;
			margin:0;
		}

		&__counter-box{
			width:25%;
		}
	}		
}

